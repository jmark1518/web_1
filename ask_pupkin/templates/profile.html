{% extends "base.html" %}

{% load static %}

{% block title %}Профиль {{ profile_user.username }}{% endblock %}

{% block content %}
<h2>Профиль: {{ profile_user.username }}</h2>

<div class="profile-info">
    <div class="avatar">
        {% if profile_user.profile.avatar %}
            <div class = "avatar"><img src="{{ profile_user.profile.avatar.url }}" width="100"></div>
        {% else %}
            <div class = "avatar"><img src="{% static 'img/anon.png' %}" width="100"> </div>
        {% endif %}
    </div>
    <div class="info">
        <p><strong>Имя:</strong> {{ profile_user.username }}</p>
        <p><strong>Email:</strong> {{ profile_user.email }}</p>
        {% if profile_user.profile.nick %}
            <p><strong>Ник:</strong> {{ profile_user.profile.nick }}</p>
        {% endif %}
        <p><strong>Зарегистрирован:</strong> {{ profile_user.date_joined|date:"d.m.Y" }}</p>
    </div>
</div>

<h3>Вопросы пользователя ({{ user_questions|length }})</h3>
{% for question in user_questions %}
<div class="question">
    <a href="/question/{{ question.id }}/">{{ question.title }}</a>
    <small>{{ question.created_at|date:"d.m.Y H:i" }}</small>
</div>
{% empty %}
<p>Пользователь еще не задавал вопросов</p>
{% endfor %}

<h3>Ответы пользователя ({{ user_answers|length }})</h3>
{% for answer in user_answers %}
<div class="answer">
    <p>{{ answer.text|truncatewords:30 }}</p>
    <small>
        Вопрос: <a href="/question/{{ answer.question.id }}/">{{ answer.question.title }}</a>
        ({{ answer.created_at|date:"d.m.Y H:i" }})
    </small>
</div>
{% empty %}
<p>Пользователь еще не отвечал</p>
{% endfor %}
{% endblock %}